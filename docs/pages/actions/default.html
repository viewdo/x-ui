<x-use
  script-src="https://cdn.jsdelivr.net/gh/PrismJS/prism@1/prism.min.js"
  style-src="https://cdn.jsdelivr.net/gh/PrismJS/prism@1/themes/prism.min.css">
</x-use>
<x-use
  script-src="https://cdn.jsdelivr.net/gh/PrismJS/prism@1/plugins/autoloader/prism-autoloader.min.js">
</x-use>
<div class="container container-fluid mx-auto">
  <h1>Event Actions</h1>
  <p class="lead">
    <b>&lt;x-ui/&gt;</b> components
    use a messaging system for inter-component
    communication.
  </p>
  <p>
    Event Actions provide an asynchronous system for expressing
    reactive HTML manipulation.
  </p>

  <h2>Actions</h2>
  <p>
    Actions are an event, with a data payload. The data command components
    to perform various functions, like updating a data store or setting a
    cookie. Action messages sent to a topic consist of
    a command and the arguments required for the given command.
  </p>
  <ul>
    <li>
      <dt>topic</dt>
      <dd>The listener's topic (usually the subsystem).</dd>
    </li>
    <li>
      <dt>command</dt>
      <dd>The task or function to perform.</dd>
    </li>
    <li>
      <dt>data</dt>
      <dd>The arguments for the command, in a name-value format.</dd>
    </li>
  </ul>


  <h3>Activation</h3>
  <p>
    Actions can be sent to the Action Bus using a standard HTML CustomEvent
    with the properties above, using the event name: <b>x:actions</b>
  </p>
  <div>
    <button class="btn btn-light"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#loadManualSource"
      aria-expanded="false"
      aria-controls="loadManualSource">
      <i class="ri-code-s-slash-line"></i>
      Toggle Source
    </button>
  </div>
  <div class="collapse"
    id="loadManualSource">
    <x-markdown>
      <script type="text/markdown">
        ````javascript
        const action = new CustomEvent('x:actions', {
          detail: {
            topic: "<system>",
            command: "<command>",
            data: {
              ...args
            }
          },
        });
        this.el.ownerDocument.body.dispatchEvent(customEvent);
        ````
      </script>
    </x-markdown>
  </div>

  <h3>Declarative Activation</h3>
  <p>
    Actions can also be expressed using the
    <a href="/components/x-action"><b>&lt;x-action&gt;</b></a>
    element. They should be wrapped within an Action Activator
    <a
      href="/components/x-action-activator"><b>&lt;x-action-activator&gt;</b></a>
    element to define how and when the actions within are activated.
  </p>


  <div>
    <button class="btn btn-light"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#loadSource"
      aria-expanded="false"
      aria-controls="loadSource">
      <i class="ri-code-s-slash-line"></i>
      Toggle Source
    </button>
  </div>
  <div class="collapse"
    id="loadSource">
    <x-markdown>
      <script type="text/markdown">
      ````html
      <x-action-activator activate="...">
        <x-action topic="interface"
          command="console"
          data-message="Testing on-enter action"></x-action>
      </x-action-activator>
      ````

      > Alternatively, you can activate an action directly with JavaScript, using the x-action element's activateAction() function.

      ````html
      <x-action topic="interface" id="actionlog"
        command="console"
        data-message="Testing on-enter action">
      </x-action>
      ````

      ````javascript
      await actionlog.activateAction()
      ````
      </script>
    </x-markdown>
  </div>

  <p></p>
  <div class="button-nav">
    <a href="/actions/events"
      class="btn btn-info text-white"> Event Activation
    </a>
    <a href="/actions/timed"
      class="btn btn-info text-white"> Timed Activation
    </a>
    <a href="/actions/elements"
      class="btn btn-info text-white"> Element Activation
    </a>
  </div>

  <h2>
    Action Listeners
  </h2>
  <p>
    Listeners execute functions or perform tasks based
    on the action commands. Check out the built-in
    actions in the documentation below.
  </p>
  <ul>
    <li><a href="/actions/data">Data Actions</a></li>
    <li><a href="/actions/navigation">Navigation Actions</a></li>
    <li><a href="/actions/audio">Audio Actions</a></li>
    <li><a href="/actions/video">Video Actions</a></li>
    <li><a href="/actions/interface">Interface Actions</a></li>
    <li><a href="/actions/custom">Custom Actions</a></li>
  </ul>

  <footer>
    <a slot="start"
      href="/content">
      <button class="btn btn-light btn-lg">&lt;
        Content</button>
    </a>
    <a slot="end"
      href="/audio">
      <button class="btn btn-primary btn-lg">Audio
        &gt;</button>
    </a>
  </footer>
</div>
